@model business.Application.Web.Models.Orders.OrderListViewModel
<style>
    .headerTableTitle {
        text-align: center;
    }
</style>
<form id="myForm" method="post">
    <h2 class="headerTableTitle">Таблица заказов</h2>
    <input type="text" id="searchInput" onkeyup="searchTable()" placeholder="Поиск...">
    <button asp-controller="Order"
            asp-action="TableOrders"
            asp-route-id="-1">
    Добавить заказ
    </button>
    @*Таблица клиентов*@
    <table>
        <thead>
            <tr>
                <th>Клиент</th>
                <th>Стоимость</th>
                <th>Статус заказа</th>
                <th>Дата заказа</th>
                <th></th>
            </tr>
        </thead>
        <tbody>
            @foreach (var ppl in Model.Orders)
            {
                <tr id="@Model">
                    <td>@ppl.Customer.Surname @ppl.Customer.Name @ppl.Customer.Middlename</td>
                    <td>@ppl.TotalCost</td>
                    <td>@ppl.OrderStatus.Status</td>
                    <td>@(ppl.OrderDate.HasValue ? ppl.OrderDate.Value.ToString("dd-MM-yyyy") : "")</td>
                    <td>
                        <button asp-controller="Order"
                                asp-action="TableOrders"
                                asp-route-id="@ppl.Id">
                            ...
                        </button>
                    </td>

                </tr>
            }
        </tbody>
    </table>
    @*Кнопки перелистывания страниц таблицы*@
    <div style="text-align: center;">
        <a href="/Order/TableOrders/?page=@(Model.Page - 1)&page-size=@(Model.PageSize)" class="btn @(Model.CanBack == false ? "disable" : "")">Предыдущая</a>
        <a href="/Order/TableOrders/?page=@(Model.Page + 1)&page-size=@(Model.PageSize)" class="btn @(Model.CanForward == false ? "disable" : "")">Следующая</a>
    </div>
    @*Выпадающий список*@
    <div class="dropdown">
        <img src="~/img/DropDownImg.svg" alt="Кол-во записей">
        <div class="dropdown-content">
            <a href="/Order/TableOrders/?page=@(Model.Page)&page-size=2">2</a>
            <a href="/Order/TableOrders/?page=@(Model.Page)&page-size=5">5</a>
            <a href="/Order/TableOrders/?page=@(Model.Page)&page-size=10">10</a>
            <a href="/Order/TableOrders/?page=@(Model.Page)&page-size=20">20</a>
        </div>
    </div>
    
</form>
@if (@Model.OrderForEdit != null)
{
    <partial name="EditOrder" model="@Model.OrderForEdit" />
} 

<script>
    function searchTable() {
        var input, filter, table, tr, td, i, txtValue;
        input = document.getElementById("searchInput");
        filter = input.value.toUpperCase();
        table = document.querySelector("table");
        tr = table.getElementsByTagName("tr");

        for (i = 0; i < tr.length; i++) {
            td = tr[i].getElementsByTagName("td")[0]; // Измените индекс, если нужно искать по другой колонке
            if (td) {
                txtValue = td.textContent || td.innerText;
                if (txtValue.toUpperCase().indexOf(filter) > -1) {
                    tr[i].style.display = "";
                } else {
                    tr[i].style.display = "none";
                }
            }
        }
    }
    

</script>
